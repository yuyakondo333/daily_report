# 今日学んだこと
## 取り組んだ課題
- メッセージ機能
## わかったこと
- メッセージ機能には2つのモデルが必要
    - Messageモデル
    - MessageRoomモデル
- 最新メッセージの内容をプレビュー表示する方法の設計に苦戦
    - 作成時間の1番最近のものを取得することも可能であるが<br>ユーザー自身のフォロワー全てに対して行う処理であるため、N+1問題が発生する。
    - 最終的には以下のように定義する
    - MessageRoomモデルにlast_messageカラムを作成
    - Roomが作成された際はデフォルト値が格納される
    - シグナルを使用
    -  message_saveシグナルでMessageが保存された時に自動的にMessageRoomのlast_messageを更新
## 感じたこと
- last_messageの設計で悩んだ
## 次やること
- PR修正
- 次回課題着手
- メッセージ機能、通知機能ワークフロー作成
- JavaScript Primer
## 学習時間
- Today: 2h
- Total: 1040h