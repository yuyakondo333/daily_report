# 今日学んだこと
## 取り組んだ課題
- paiza
- 【Next.js】フルスタック開発基本講座
## わかったこと
### zodでよく使う機能
- optional, default
```javascript
// オプショナルフィールド
age: z.number().optional()

// デフォルト値設定
role: z.string().default("user")
createdAt: z.date().default(() => new Date())
```
- safeParse
```javascript
const result = schema.safeParse(data)
if (result.success) {
  // 成功時の処理
} else {
  // エラー時の処理
  console.log(result.error.flatten().fieldErrors)
}
```
- z.infer
```javascript
const UserSchema = z.object({...})
type User = z.infer<typeof UserSchema>
```
- omit
```javascript
// IDを除いた作成用スキーマ
const CreateUserSchema = UserSchema.omit({ id: true })
```
- 配列バリデーション
```javascript
// 配列の基本
tags: z.array(z.string())

// 空でない配列
items: z.array(z.string()).nonempty("最低1つは必要")
```
- nullable と nullish
```javascript
// nullを許可
nickname: z.string().nullable()

// null | undefined を許可
bio: z.string().nullish()
```
- refine
```javascript
// パスワード確認
.refine((data) => data.password === data.confirmPassword, {
  message: "パスワードが一致しません",
  path: ["confirmPassword"]
})
```
- transform
```javascript
// 文字列を数値に変換
age: z.string().transform(val => parseInt(val))

// 前後の空白削除
name: z.string().transform(val => val.trim())
```
## 感じたこと
- paizaはデータ選択問題が弱い
- zodは実務に入ってからユースケースごとに調べて実装して理解度を深めていく
## 次やること
- ブログ作成 認証部分
## 学習時間
- Today: 5.5h
- Total: 1606.5h